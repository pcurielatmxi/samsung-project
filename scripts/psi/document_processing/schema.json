{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PSI Daily Field Report - Analytics",
  "type": "object",
  "properties": {
    "report_date": {
      "type": ["string", "null"],
      "description": "Report date (YYYY-MM-DD)"
    },
    "inspection_type": {
      "type": "string",
      "description": "Type of inspection (e.g., 'Paint Touch Up', 'Framing', 'Drywall', 'MEP')"
    },
    "location": {
      "type": ["string", "null"],
      "description": "Location (project, building, level, area, grid coordinates)"
    },
    "summary": {
      "type": "string",
      "description": "Brief summary of the inspection and findings"
    },
    "outcome": {
      "type": "string",
      "enum": ["PASS", "FAIL", "PARTIAL", "CANCELLED"],
      "description": "Inspection outcome: PASS (all passed), FAIL (failed), PARTIAL (mixed results), CANCELLED (inspection did not occur)"
    },
    "failure_reason": {
      "type": ["string", "null"],
      "description": "Primary reason for failure, quoted from document if available"
    },
    "issues": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Description of the issue or deficiency"
          },
          "severity": {
            "type": ["string", "null"],
            "description": "Severity level if stated"
          }
        },
        "required": ["description"]
      },
      "description": "List of issues, deficiencies, or non-conformances found"
    },
    "parties_involved": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the party"
          },
          "role": {
            "type": "string",
            "description": "Role (e.g., 'contractor', 'subcontractor', 'trade', 'inspector')"
          }
        },
        "required": ["name", "role"]
      },
      "description": "List of parties involved in the inspection"
    },
    "reinspection_required": {
      "type": ["boolean", "null"],
      "description": "Whether re-inspection is required"
    },
    "corrective_action": {
      "type": ["string", "null"],
      "description": "Corrective action noted or required"
    },
    "deficiency_count": {
      "type": ["integer", "null"],
      "description": "Number of deficiencies found"
    }
  },
  "required": ["inspection_type", "outcome", "summary"]
}
